[tool.poetry.dependencies]
python = ">=3.9,<4.0"

[tool.poetry]
package-mode = false

[[tool.poetry.source]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
priority = "explicit"

[tool.poetry.group.dev.dependencies]
torch = { version = ">=1.8.0,<=2.7.1", source = "pytorch-cpu" }
torchvision = { version = "<=0.22.0", source = "pytorch-cpu" }

[tool.poetry.group.tests]
optional = true

[tool.poetry.group.tests.dependencies]
torchaudio = { version = "<=2.6.0", source = "pytorch-cpu" }
transformers = "<=4.47.1"
huggingface-hub = "<=0.25.2"
autoawq = { version = "<=0.2.7", markers = "platform_system == 'Linux' and platform_machine == 'x86_64'" }
# triton is a dependency of autoawq, newer versions lead to TorchFX test failures
triton = { version = "<=3.1.0", markers = "platform_system == 'Linux' and platform_machine == 'x86_64'" }
auto-gptq = { version = "<=0.7.1", markers = "platform_system == 'Linux' and platform_machine == 'x86_64' and python_version < '3.12'" }
av = "<=13.0.0"
basicsr = { version = "==1.4.2", markers = "python_version < '3.12'" }
datasets = "<=3.0.1"
easyocr = "<=1.7.2"
facexlib = { version = "<=0.3.0", markers = "python_version < '3.12'" }
librosa = { version = "<=0.10.2", markers = "python_version < '3.12'" }
packaging = "<=24.1"
pandas = "<=2.2.3"
protobuf = "<=5.28.2"
pyctcdecode = { version = "<=0.5.0", markers = "python_version < '3.12'" }
sacremoses = "<=0.1.1"
sentencepiece = "<=0.2.0"
soundfile = "<=0.12.1"
timm = "<=1.0.11"
kornia = "<=0.7.3"
super-image = "<=0.1.7"

# requirements for specific models
# - hf-tiny-model-private/tiny-random-RoFormerForCausalLM
rjieba = "<=0.1.11"
# - katuni4ka/tiny-random-qwen
# - katuni4ka/tiny-random-internlm2
transformers_stream_generator = "<=0.0.5"
einops = "<=0.8.0"
optimum-intel = [
    { git = "https://github.com/huggingface/optimum-intel.git", rev = "303bc50fdeb34b427dc1b04be741bf4f11415b2d", extras = ["nncf"], allow-prereleases = true, markers = "python_version >= '3.12'" },
    { git = "https://github.com/huggingface/optimum-intel.git", rev = "8ba536cd0a2bf93e9e88408b0048a7695db5be0b", extras = ["nncf"], allow-prereleases = true, markers = "python_version < '3.12'" },
]